#!/usr/bin/env mksh
#
#
THIS_DIR="$(dirname "$(dirname "$(readlink -m "$0")")")"
THIS_ACTION=$1; shift

set -u -e -o pipefail

export MKSH_DIR="$THIS_DIR"

case "$THIS_ACTION" in

  -h|--help|help)
    source "$THIS_DIR/bin/public/print-help/_.sh"
    print-help "$0" "$@"
    return $?
    ;;

  *)

    THIS_PUBLIC_FILE="$THIS_DIR/bin/public/$THIS_ACTION/_.sh"
    if [[ -f "$THIS_PUBLIC_FILE" ]]; then
      source "$THIS_PUBLIC_FILE"
      $THIS_ACTION "$@"
      return $?
    fi

    ;;
esac


echo "!!! Action not found: $@" >&2
return 1
